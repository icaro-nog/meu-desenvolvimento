!function(e){e.sectionConstructor["customify-pro"]=e.Section.extend({attachEvents:function(){},isContextuallyActive:function(){return!0}})}(wp.customize),function(a){var n=wp.customize,e=(n.bind("pane-contents-reflowed",function(){var t=[],i=(n.section.each(function(e){"customify_section"===e.params.type&&void 0!==e.params.section&&t.push(e)}),t.sort(n.utils.prioritySort).reverse(),a.each(t,function(e,t){a("#sub-accordion-section-"+t.params.section).children(".section-meta").after(t.headContainer)}),[]);n.panel.each(function(e){"customify_panel"===e.params.type&&void 0!==e.params.panel&&i.push(e)}),i.sort(n.utils.prioritySort).reverse(),a.each(i,function(e,t){a("#sub-accordion-panel-"+t.params.panel).children(".panel-meta").after(t.headContainer)})}),wp.customize.Panel.prototype.embed),s=wp.customize.Panel.prototype.isContextuallyActive,t=wp.customize.Panel.prototype.attachEvents,i=(wp.customize.Panel=wp.customize.Panel.extend({attachEvents:function(){var i;"customify_panel"!==this.params.type||void 0===this.params.panel?t.call(this):(t.call(this),(i=this).expanded.bind(function(e){var t=n.panel(i.params.panel);e?t.contentContainer.addClass("current-panel-parent"):t.contentContainer.removeClass("current-panel-parent")}),i.container.find(".customize-panel-back").off("click keydown").on("click keydown",function(e){n.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),i.expanded()&&n.panel(i.params.panel).expand())}))},embed:function(){"customify_panel"!==this.params.type||void 0===this.params.panel?e.call(this):(e.call(this),a("#sub-accordion-panel-"+this.params.panel).append(this.headContainer))},isContextuallyActive:function(){if("customify_panel"!==this.params.type)return s.call(this);var t=this,i=this._children("panel","section"),a=(n.panel.each(function(e){e.params.panel&&e.params.panel===t.id&&i.push(e)}),i.sort(n.utils.prioritySort),0);return _(i).each(function(e){e.active()&&e.isContextuallyActive()&&(a+=1)}),0!==a}}),wp.customize.Section.prototype.embed),o=wp.customize.Section.prototype.isContextuallyActive,c=wp.customize.Section.prototype.attachEvents;wp.customize.Section=wp.customize.Section.extend({attachEvents:function(){var i;"customify_section"!==this.params.type||void 0===this.params.section?c.call(this):(c.call(this),(i=this).expanded.bind(function(e){var t=n.section(i.params.section);e?t.contentContainer.addClass("current-section-parent"):t.contentContainer.removeClass("current-section-parent")}),i.container.find(".customize-section-back").off("click keydown").on("click keydown",function(e){n.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),i.expanded()&&n.section(i.params.section).expand())}))},embed:function(){"customify_section"!==this.params.type||void 0===this.params.section?i.call(this):(i.call(this),a("#sub-accordion-section-"+this.params.section).append(this.headContainer))},isContextuallyActive:function(){if("customify_section"!==this.params.type)return o.call(this);var t=this,i=this._children("section","control"),a=(n.section.each(function(e){e.params.section&&e.params.section===t.id&&i.push(e)}),i.sort(n.utils.prioritySort),0);return _(i).each(function(e){void 0!==e.isContextuallyActive?e.active()&&e.isContextuallyActive()&&(a+=1):e.active()&&(a+=1)}),0!==a}})}(jQuery),function(d,o){"use strict";var u=d(document),t=Customify_Control_Args.is_rtl,i={setAttachment:function(e){this.attachment=e},addParamsURL:function(e,t){return d.isEmptyObject(t)||(e+=(0<=e.indexOf("?")?"&":"?")+d.param(t)),e},getThumb:function(e){void 0!==e&&(this.attachment=e);e=(new Date).getTime();return void 0!==this.attachment.sizes&&void 0!==this.attachment.sizes.medium?this.addParamsURL(this.attachment.sizes.medium.url,{t:e}):this.addParamsURL(this.attachment.url,{t:e})},getURL:function(e){void 0!==e&&(this.attachment=e);e=(new Date).getTime();return this.addParamsURL(this.attachment.url,{t:e})},getID:function(e){return void 0!==e&&(this.attachment=e),this.attachment.id},getInputID:function(e){d(".attachment-id",this.preview).val()},setPreview:function(e){this.preview=e},insertImage:function(e){void 0!==e&&(this.attachment=e);var e=this.getURL(),t=this.getID(),i=this.attachment.mime;d(".customify-image-preview",this.preview).addClass("customify--has-file").html('<img src="'+e+'" alt="">'),d(".attachment-url",this.preview).val(this.toRelativeUrl(e)),d(".attachment-mime",this.preview).val(i),d(".attachment-id",this.preview).val(t).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},toRelativeUrl:function(e){return e},showChangeBtn:function(){d(".customify--add",this.preview).addClass("customify--hide"),d(".customify--change",this.preview).removeClass("customify--hide"),d(".customify--remove",this.preview).removeClass("customify--hide")},insertVideo:function(e){void 0!==e&&(this.attachment=e);var e=this.getURL(),t=this.getID(),i=this.attachment.mime,a='<video width="100%" height="" controls><source src="'+e+'" type="'+i+'">Your browser does not support the video tag.</video>';d(".customify-image-preview",this.preview).addClass("customify--has-file").html(a),d(".attachment-url",this.preview).val(this.toRelativeUrl(e)),d(".attachment-mime",this.preview).val(i),d(".attachment-id",this.preview).val(t).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},insertFile:function(e){void 0!==e&&(this.attachment=e);var e=e.url,t=this.attachment.mime,i=e.replace(/^.*[\\\/]/,"");d(".customify-image-preview",this.preview).addClass("customify--has-file").html('<a href="'+e+'" class="attachment-file" target="_blank">'+i+"</a>"),d(".attachment-url",this.preview).val(this.toRelativeUrl(e)),d(".attachment-mime",this.preview).val(t),d(".attachment-id",this.preview).val(this.getID()).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},remove:function(e){void 0!==e&&(this.preview=e),d(".customify-image-preview",this.preview).removeAttr("style").html("").removeClass("customify--has-file"),d(".attachment-url",this.preview).val(""),d(".attachment-mime",this.preview).val(""),d(".attachment-id",this.preview).val("").trigger("change"),this.preview.removeClass("attachment-added"),d(".customify--add",this.preview).removeClass("customify--hide"),d(".customify--change",this.preview).addClass("customify--hide"),d(".customify--remove",this.preview).addClass("customify--hide")}},a=(i.controlMediaImage=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1,library:{type:"image"}}),i.controlMediaImage.on("select",function(){var e=i.controlMediaImage.state().get("selection").first().toJSON();i.insertImage(e)}),i.controlMediaVideo=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1,library:{type:"video"}}),i.controlMediaVideo.on("select",function(){var e=i.controlMediaVideo.state().get("selection").first().toJSON();i.insertVideo(e)}),i.controlMediaFile=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1}),i.controlMediaFile.on("select",function(){var e=i.controlMediaFile.state().get("selection").first().toJSON();i.insertFile(e)}),{}),c={devices:["desktop","tablet","mobile"],allDevices:["desktop","tablet","mobile"],type:"customify",getTemplate:_.memoize(function(){var a=this,n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e,t,i){return _.isUndefined(t)&&(t="tmpl-field-customify-"+a.type),!_.isUndefined(i)&&_.isString(i)?n.variable=i:n.variable="data",_.template(d("#"+t).html(),null,n)(e)}}),getFieldValue:function(a,e,n){var t,i=this,s=void 0,o=!1,c=(_.isUndefined(e)||(s=e.type,o=e.device_settings),"");switch(s){case"media":case"image":case"video":case"attachment":case"audio":o?(c={},_.each(i.allDevices,function(e){var t=a+"-"+e;c[e]={id:d('input[data-name="'+t+'"]',n).val(),url:d('input[data-name="'+t+'-url"]',n).val(),mime:d('input[data-name="'+t+'-mime"]',n).val()}})):c={id:d('input[data-name="'+a+'"]',n).val(),url:d('input[data-name="'+a+'-url"]',n).val(),mime:d('input[data-name="'+a+'-mime"]',n).val()};break;case"css_ruler":o?(c={},_.each(i.allDevices,function(e){var t=a+"-"+e;c[e]={unit:d('input[data-name="'+t+'-unit"]:checked',n).val(),top:d('input[data-name="'+t+'-top"]',n).val(),right:d('input[data-name="'+t+'-right"]',n).val(),bottom:d('input[data-name="'+t+'-bottom"]',n).val(),left:d('input[data-name="'+t+'-left"]',n).val(),link:d('input[data-name="'+t+'-link"]',n).is(":checked")?1:""}})):c={unit:d('input[data-name="'+a+'-unit"]:checked',n).val(),top:d('input[data-name="'+a+'-top"]',n).val(),right:d('input[data-name="'+a+'-right"]',n).val(),bottom:d('input[data-name="'+a+'-bottom"]',n).val(),left:d('input[data-name="'+a+'-left"]',n).val(),link:d('input[data-name="'+a+'-link"]',n).is(":checked")?1:""};break;case"shadow":o?(c={},_.each(i.allDevices,function(e){var t=a+"-"+e;c[e]={color:d('input[data-name="'+t+'-color"]',n).val(),x:d('input[data-name="'+t+'-x"]',n).val(),y:d('input[data-name="'+t+'-y"]',n).val(),blur:d('input[data-name="'+t+'-blur"]',n).val(),spread:d('input[data-name="'+t+'-spread"]',n).val(),inset:!!d('input[data-name="'+t+'-inset"]',n).is(":checked")&&1}})):c={color:d('input[data-name="'+a+'-color"]',n).val(),x:d('input[data-name="'+a+'-x"]',n).val(),y:d('input[data-name="'+a+'-y"]',n).val(),blur:d('input[data-name="'+a+'-blur"]',n).val(),spread:d('input[data-name="'+a+'-spread"]',n).val(),inset:!!d('input[data-name="'+a+'-inset"]',n).is(":checked")&&1};break;case"font_style":o?(c={},_.each(i.allDevices,function(e){var t=a+"-"+e;c[e]={b:d('input[data-name="'+t+'-b"]',n).is(":checked")?1:"",i:d('input[data-name="'+t+'-i"]',n).is(":checked")?1:"",u:d('input[data-name="'+t+'-u"]',n).is(":checked")?1:"",s:d('input[data-name="'+t+'-s"]',n).is(":checked")?1:"",t:d('input[data-name="'+t+'-t"]',n).is(":checked")?1:""}})):c={b:d('input[data-name="'+a+'-b"]',n).is(":checked")?1:"",i:d('input[data-name="'+a+'-i"]',n).is(":checked")?1:"",u:d('input[data-name="'+a+'-u"]',n).is(":checked")?1:"",s:d('input[data-name="'+a+'-s"]',n).is(":checked")?1:"",t:d('input[data-name="'+a+'-t"]',n).is(":checked")?1:""};break;case"font":o?(c={},_.each(i.allDevices,function(e){var t=a+"-"+e,i={};d('.list-subsets[data-name="'+t+'-subsets"] input',n).each(function(){var e;d(this).is(":checked")&&(e=d(this).val(),i[e]=e)}),c[e]={font:d('select[data-name="'+t+'-font"]',n).val(),type:d('input[data-name="'+t+'-type"]',n).val(),variant:d('select[data-name="'+t+'-variant"]',n).val(),subsets:i}})):(t={},d('.list-subsets[data-name="'+a+'-subsets"] input',n).each(function(){var e;d(this).is(":checked")&&(e=d(this).val(),t[e]=e)}),c={font:d('select[data-name="'+a+'-font"]',n).val(),type:d('input[data-name="'+a+'-type"]',n).val(),variant:d('select[data-name="'+a+'-variant"]',n).val(),subsets:t});break;case"slider":o?(c={},_.each(i.allDevices,function(e){var t=a+"-"+e;c[e]={unit:d('input[data-name="'+t+'-unit"]:checked',n).val(),value:d('input[data-name="'+t+'-value"]',n).val()}})):c={unit:d('input[data-name="'+a+'-unit"]:checked',n).val(),value:d('input[data-name="'+a+'-value"]',n).val()};break;case"icon":o?(c={},_.each(i.allDevices,function(e){var t=a+"-"+e;c[e]={type:d('input[data-name="'+t+'-type"]',n).val(),icon:d('input[data-name="'+t+'"]',n).val()}})):c={type:d('input[data-name="'+a+'-type"]',n).val(),icon:d('input[data-name="'+a+'"]',n).val()};break;case"radio":case"text_align":case"text_align_no_justify":o?(c={},_.each(i.allDevices,function(e){var t=d('input[data-name="'+a+"-"+e+'"]:checked',n);c[e]=t.length?t.val():""})):c=d('input[data-name="'+a+'"]:checked',n).val();break;case"checkbox":o?(c={},_.each(i.allDevices,function(e){c[e]=d('input[data-name="'+a+"-"+e+'"]',n).is(":checked")?1:""})):c=d('input[data-name="'+a+'"]',n).is(":checked")?1:"";break;case"checkboxes":c={},o?_.each(i.allDevices,function(e){c[e]={},d('input[data-name="'+a+"-"+e+'"]',n).each(function(){var e=d(this).val();d(this).is(":checked")&&(c[e]=e)})}):d('input[data-name="'+a+'"]',n).each(function(){var e=d(this).val();d(this).is(":checked")&&(c[e]=e)});break;case"typography":case"modal":case"styling":o?(c={},_.each(i.allDevices,function(e){c[e]=d('[data-name="'+a+"-"+e+'"]',n).val()})):c=d('[data-name="'+a+'"]',n).val();try{c=JSON.parse(c)}catch(e){}break;default:o?(c={},_.each(i.allDevices,function(e){c[e]=d('[data-name="'+a+"-"+e+'"]',n).val()})):c=d('[data-name="'+a+'"]',n).val()}return c},getValue:function(s,n){var o=this,c="";switch(s.type){case"group":c={},s.device_settings?_.each(o.allDevices,function(e){var i=d(".customify-group-device-fields.customify--for-"+e,n),a=(c[e]={},{});_.each(s.fields,function(e){var t=d('.customify--group-field[data-field-name="'+e.name+'"]',i);a[e.name]=o.getFieldValue(e.name,e,t)}),c[e]=a,o.initConditional(i,a)}):(_.each(s.fields,function(e){var t=d('.customify--group-field[data-field-name="'+e.name+'"]',n);c[e.name]=o.getFieldValue(e.name,e,t)}),o.initConditional(n,c));break;case"repeater":c=[],d(".customify--repeater-item",n).each(function(e){var a=d(this),n={};_.each(s.fields,function(e){var t=d('[data-field-name="'+e.name+'"]',a),i=o.getFieldValue(e.name,e,a);n[e.name]=i,s.live_title_field==e.name&&("select"==t.prop("tagName")?i=d('option[value="'+i+'"]').first().text():!_.isUndefined(i)&&""!=i||(i=Customify_Control_Args.untitled),o.updateRepeaterLiveTitle(i,a,e))}),o.initConditional(a,n),c[e]=n,c[e]._visibility="visible",d("input.r-visible-input",a).length&&!d("input.r-visible-input",a).is(":checked")&&(c[e]._visibility="hidden")});break;default:c=this.getFieldValue(s.name,s,n)}return c},encodeValue:function(e){return encodeURI(JSON.stringify(e))},decodeValue:function(e){return JSON.parse(decodeURI(e))},updateRepeaterLiveTitle:function(e,t,i){d(".customify--repeater-live-title",t).text(e)},compare:function(e,t,i){var a=!1;switch(t){case"===":a=e===i;break;case">":a=i<e;break;case"<":a=e<i;break;case"!=":a=e!=i;break;case"empty":var n=_.clone(e),a=_.isObject(n)||_.isArray(n)?(_.each(n,function(e,t){_.isEmpty(e)&&delete n[t]}),!!_.isEmpty(n)):!(!_.isNull(n)&&""!=n);break;case"not_empty":n=_.clone(e);(_.isObject(n)||_.isArray(n))&&_.each(n,function(e,t){_.isEmpty(e)&&delete n[t]}),a=!_.isEmpty(n);break;default:a=_.isArray(i)?!_.isEmpty(i)&&!_.isEmpty(e)&&_.contains(i,e):e==i}return a},multiple_compare:function(e,s,o){_.isUndefined(o)&&(o=!1);var c=this,l=!1;try{var t=e[0];if(_.isString(t)){var i,l=!1,a=e[1],n=e[2],r=!1;if(_.isUndefined(e[3])||(r=e[3]),!_.isUndefined(s[t])){i=s[t],r&&_.isObject(i)&&!_.isUndefined(i[r])&&(i=i[r]);try{o&&(i=c.decodeValue(i))}catch(e){}l=c.compare(i,a,n)}}else _.isArray(t)&&(l=!0,_.each(e,function(e){var t=e[0],i=e[1],a=e[2],n=!1,e=(_.isUndefined(e[3])||(n=e[3]),s[t]);if(_.isUndefined(e)&&(e=""),o&&_.isString(e))try{e=c.decodeValue(e)}catch(e){}n&&_.isObject(e)&&!_.isUndefined(e[n])&&(e=e[n]),c.compare(e,i,a)||(l=!1)}))}catch(e){}return l},initConditional:function(e,i){var a=this;d(".customify--field",e).each(function(){var e=d(this),t=e.attr("data-required")||!1;!_.isUndefined(t)&&t&&(t=JSON.parse(t),a.multiple_compare(t,i)?e.removeClass("customify--hide"):e.addClass("customify--hide"))})},addDeviceSwitchers:function(e){var t=this,i=(_.isUndefined(e)&&(e=t.container),d("#customize-footer-actions .devices").clone());i.addClass("customify-devices"),d("button",i).each(function(){var e=d(this).attr("data-device");_.indexOf(t.devices,e)<0&&d(this).remove()}),d(".customify-field-heading",e).append(i).addClass("customify-devices-added")},addRepeaterItem:function(a,n,e,s){_.isObject(n)||(n={});var o=this,t=o.getTemplate(),i=a.fields,c=!0,l=a.title_only,r=(!1===a.addable&&(c=!1),d(t(a,"tmpl-customize-control-repeater-layout")));return e.find(".customify--settings-fields").append(r),_.each(i,function(e,t){e.value="",e.addable=c,_.isUndefined(n[e.name])||(e.value=n[e.name]),i=d('<div class="customify--repeater-field"></div>'),d(".customify--repeater-item-inner",r).append(i),o.add(e,i,function(){_.isFunction(s)&&s()});var i=e.value;a.live_title_field===e.name&&("select"===e.type?i=e.choices[e.value]:!_.isUndefined(i)&&""!=i||(i=Customify_Control_Args.untitled),o.updateRepeaterLiveTitle(i,r,e))}),_.isUndefined(n._visibility)||"hidden"!==n._visibility?r.find("input.r-visible-input").attr("checked","checked"):(r.addClass("item---visible-hidden"),r.find("input.r-visible-input").removeAttr("checked")),l&&d(".customify--repeater-item-settings, .customify--repeater-item-toggle",r).hide(),u.trigger("customify/customizer/repeater/add",[r,o]),r},limitRepeaterItems:function(e,t){},initRepeater:function(t,i,a){var n=this,s=((t=_.defaults(t,{addable:null,title_only:null,limit:null,live_title_field:null,fields:null})).limit=parseInt(t.limit),isNaN(t.limit)&&(t.limit=0),i.find(".customify--settings-fields").sortable({handle:".customify--repeater-item-heading",containment:"parent",update:function(e,t){_.isFunction(a)&&a()}}),i.on("click",".customify--repeater-reorder",function(e){e.preventDefault(),d(".customify--repeater-items",i).toggleClass("reorder-active"),d(".customify--repeater-add-new",i).toggleClass("disabled"),d(".customify--repeater-items",i).hasClass("reorder-active")?d(this).html(d(this).data("done")):d(this).html(d(this).data("text"))}),i.on("click",".customify--repeater-item .customify--up",function(e){e.preventDefault();var t,e=d(this).closest(".customify--repeater-item");0<e.index()&&(t=e.prev(),e.insertBefore(t),_.isFunction(a)&&a())}),i.on("click",".customify--repeater-item .customify--down",function(e){e.preventDefault();var e=d(".customify--repeater-items .customify--repeater-item",i).length,t=d(this).closest(".customify--repeater-item");t.index()<e-1&&(e=t.next(),t.insertAfter(e),_.isFunction(a)&&a())}),_.isArray(t.value)&&_.each(t.value,function(e){n.addRepeaterItem(t,e,i,a)}),n.limitRepeaterItems(),i.on("change",".customify--repeater-item .r-visible-input",function(e){e.preventDefault();e=d(this).closest(".customify--repeater-item");d(this).is(":checked")?e.removeClass("item---visible-hidden"):e.addClass("item---visible-hidden")}),t.title_only||i.on("click",".customify--repeater-item-toggle, .customify--repeater-live-title",function(e){e.preventDefault(),d(this).closest(".customify--repeater-item").toggleClass("customify--open")}),i.on("click",".customify--remove",function(e){e.preventDefault(),d(this).closest(".customify--repeater-item").remove(),u.trigger("customify/customizer/repeater/remove",[n]),_.isFunction(a)&&a(),n.limitRepeaterItems()}),{});_.each(t.fields,function(e,t){s[e.name]=null,_.isUndefined(e.default)||(s[e.name]=e.default)}),i.on("click",".customify--repeater-add-new",function(e){e.preventDefault(),d(this).hasClass("disabled")||(n.addRepeaterItem(t,s,i,a),_.isFunction(a)&&a(),n.limitRepeaterItems())})},add:function(a,n,e){var s,t,i=this,o=i.getTemplate(),c="tmpl-field-"+i.type+"-"+a.type;switch(0==d("#"+c).length&&(c="tmpl-field-"+i.type+"-text"),a.device_settings?(s=null,_.each(i.devices,function(e,t){var i=_.clone(a),t=(i.original_name=a.name,_.isObject(a.value)?_.isUndefined(a.value[e])?i.value="":i.value=a.value[e]:(i.value="",0===t&&(i.value=a.value)),i.name=a.name+"-"+e,i._current_device=e,d(o(i,c,"field"))),i=t.find(".customify-field-settings-inner").first();s||n.append(t).addClass("customify--multiple-devices"),i.addClass("customify--for-"+e),i.attr("data-for-device",e),s&&(i.insertAfter(s),s=i),s=i})):(a.original_name=a.name,t=o(a,c,"field"),n.html(t)),"repeater"===a.type&&(t=d(o(a,"tmpl-customize-control-repeater-inner")),n.find(".customify-field-settings-inner").replaceWith(t),i.initRepeater(a,t,e)),a.css_format&&_.isString(a.css_format)&&0<a.css_format.indexOf("value_no_unit")&&(n.find(".customify--slider-input").addClass("no-unit"),d(".customify--css-unit .customify--label-active",n).hide()),a.type){case"color":case"shadow":i.initColor(n);break;case"image":case"video":case"audio":case"attchment":case"file":i.initMedia(n);break;case"slider":i.initSlider(n);break;case"css_ruler":i.initCSSRuler(n,e)}"hidden"!==a.type&&!_.isUndefined(a.device_settings)&&a.device_settings&&i.addDeviceSwitchers(n)},addFields:function(e,a,n,s){var o=this;_.isObject(a)||(a={}),_.each(e,function(e,t){_.isUndefined(e.class)&&(e.class="");var i=d('<div class="customify--group-field ft--'+e.type+" "+e.class+'" data-field-name="'+e.name+'"></div>');n.append(i),e.original_name=e.name,_.isUndefined(a[e.name])?_.isUndefined(e.default)?e.value=null:e.value=e.default:e.value=a[e.name],o.add(e,i,s)})},initSlider:function(e){0<d(".customify-input-slider",e).length&&d(".customify-input-slider",e).each(function(){var t=d(this),e=t.parent(),i=d(".customify--slider-input",e),e=t.data("min")||0,a=t.data("max")||300,n=t.data("step")||1,s=(_.isNumber(e)||(e=0),_.isNumber(a)||(a=300),_.isNumber(n)||(n=1),i.val()),o=(t.slider({range:"min",value:s,step:n,min:e,max:a,slide:function(e,t){i.val(t.value).trigger("data-change")}}),i.on("change",function(){t.slider("value",d(this).val())}),t.closest(".customify-input-slider-wrapper"));o.on("click",".reset",function(e){e.preventDefault();e=t.data("default");_.isObject(e)||(e={unit:"px",value:""}),d(".customify--slider-input",o).val(e.value),t.slider("option","value",e.value),d('.customify--css-unit input.customify-input[value="'+e.unit+'"]',o).trigger("click"),d(".customify--slider-input",o).trigger("change")})})},initMedia:function(e){e.on("click",".customify--media .customify--add, .customify--media .customify--change, .customify--media .customify-image-preview",function(e){e.preventDefault();e=d(this).closest(".customify--media");i.setPreview(e),i.controlMediaImage.open()}),e.on("click",".customify--media .customify--remove",function(e){e.preventDefault();e=d(this).closest(".customify--media");i.remove(e)})},initCSSRuler:function(t,i){t.on("change",".customify--label-parent",function(){var e;"radio"==d(this).attr("type")&&(e=d(this).attr("name"),d('input[name="'+e+'"]',t).parent().removeClass("customify--label-active")),d(this).is(":checked")?d(this).parent().addClass("customify--label-active"):d(this).parent().removeClass("customify--label-active"),_.isFunction(i)&&i()}),t.on("change keyup",".customify--css-ruler .customify-input-css",function(){var e,t=d(this).closest(".customify--css-ruler");d(".customify--css-ruler-link input",t).is(":checked")&&(e=d(this).val(),d(".customify-input-css",t).not(d(this)).each(function(){d(this).is(":disabled")||d(this).val(e)})),_.isFunction(i)&&i()})},initColor:function(e){d(".customify-input-color",e).each(function(){var a=d(this),e=a.data("default")||"",n=d(".customify-input--color",a).val();d(".customify--color-panel",a).attr("data-alpha","true"),d(".customify--color-panel",a).wpColorPicker({defaultColor:e,change:function(e,t){var i=t.color.toString();d(".customify-input--color",a).val(i),t.color.toString()!==n&&(n=i,d(".customify-input--color",a).trigger("change"))},clear:function(e,t){d(".customify-input--color",a).val(""),d(".customify-input--color",a).trigger("data-change")}})})}},n={devices:["desktop","tablet","mobile"],type:"customify",settingField:null,getTemplate:_.memoize(function(){var a=this,n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e,t,i){return _.isUndefined(t)&&(t="tmpl-field-customify-"+a.type),!_.isUndefined(i)&&_.isString(i)?n.variable=i:n.variable="data",_.template(d("#"+t).html(),null,n)(e)}}),addDeviceSwitchers:c.addDeviceSwitchers,init:function(){var e=this;switch(_.isArray(e.params.devices)&&!_.isEmpty(e.params.devices)&&(e.devices=e.params.devices),e.settingField=e.container.find("[data-customize-setting-link]").first(),e.params.setting_type){case"group":e.initGroup();break;case"repeater":e.initRepeater();break;default:e.initField()}e.container.on("change keyup data-change","input:not(.change-by-js), select:not(.change-by-js), textarea:not(.change-by-js)",function(){e.getValue()})},addParamsURL:function(e,t){return d.isEmptyObject(t)||(e+=(0<=e.indexOf("?")?"&":"?")+d.param(t)),e},compare:c.compare,multiple_compare:c.multiple_compare,initConditional:c.initConditional,getValue:function(e){var i=this,t=_.clone(i.params);return t.type=i.params.setting_type,t.name=i.id,t.value=i.value,t.default=i.params.default,t.devices=i.params.devices,"slider"===t.type&&(t.min=i.params.min,t.max=i.params.max,t.step=i.params.step,t.unit=i.params.unit),"css_ruler"===t.type&&(t.fields_disabled=i.params.fields_disabled),"group"!==t.type&&"repeater"!==t.type||(t.fields=i.params.fields,t.live_title_field=i.params.live_title_field),"select"!==i.params.setting_type&&"radio"!==i.params.setting_type||(t.choices=i.params.choices),"checkbox"===i.params.setting_type&&(t.checkbox_label=i.params.checkbox_label),t.device_settings=i.params.device_settings,t=c.getValue(t,d(".customify--settings-fields",i.container)),(_.isUndefined(e)||e)&&(i.setting.set(i.encodeValue(t)),_.isArray(i.params.reset_controls)&&_.each(i.params.reset_controls,function(e){try{var t=o.control(e);t.setting.set(i.encodeValue(t.params.default))}catch(e){}}),u.trigger("customify/customizer/value_changed",[i,t])),t},encodeValue:function(e){return encodeURI(JSON.stringify(e))},decodeValue:function(e){return JSON.parse(decodeURI(e))},updateRepeaterLiveTitle:function(e,t,i){d(".customify--repeater-live-title",t).text(e)},initGroup:function(){var n=this;n.params.device_settings?(n.container.find(".customify--settings-fields").addClass("customify--multiple-devices"),_.isObject(n.params.value)||(n.params.value={}),_.each(n.devices,function(e,t){var i=d('<div class="customify-group-device-fields customify-field-settings-inner customify--for-'+e+'"></div>'),a=(n.container.find(".customify--settings-fields").append(i),{});_.isUndefined(n.params.value[e])||(a=n.params.value[e]),_.isObject(a)||(a={}),c.addFields(n.params.fields,a,i,function(){n.getValue()})})):c.addFields(n.params.fields,n.params.value,n.container.find(".customify--settings-fields"),function(){n.getValue()}),n.getValue(!1)},addField:function(e,t,i){c.devices=_.clone(this.devices),c.add(e,t,i)},initField:function(){var e=this,t=_.clone(e.params),i=("slider"==(t=_.extend(t,{type:e.params.setting_type,name:e.id,value:e.params.value,default:e.params.default,devices:e.params.devices,unit:e.params.unit,title:null,label:null,description:null})).type&&(t.min=e.params.min,t.max=e.params.max,t.step=e.params.step),"css_ruler"==t.type&&(t.fields_disabled=e.params.fields_disabled),"select"!=e.params.setting_type&&"radio"!=e.params.setting_type||(t.choices=e.params.choices),"checkbox"==e.params.setting_type&&(t.checkbox_label=e.params.checkbox_label),t.device_settings=e.params.device_settings,e.container.find(".customify--settings-fields"));e.addField(t,i,function(){e.getValue()}),"hidden"!==t.type&&!_.isUndefined(t.device_settings)&&t.device_settings&&e.addDeviceSwitchers(e.container)},addRepeaterItem:function(a){_.isObject(a)||(a={});var n=this,e=n.getTemplate(),t=n.params.fields,s=!0,i=n.params.title_only,o=(!1===n.params.addable&&(s=!1),d(e(n.params,"tmpl-customize-control-repeater-item")));return n.container.find(".customify--settings-fields").append(o),_.each(t,function(e,t){var i;e.value="",e.addable=s,_.isUndefined(a[e.name])||(e.value=a[e.name]),i=d('<div class="customify--repeater-field"></div>'),d(".customify--repeater-item-inner",o).append(i),n.addField(e,i,function(){n.getValue()})}),_.isUndefined(a._visibility)||"hidden"!==a._visibility?o.find("input.r-visible-input").attr("checked","checked"):(o.addClass("item---visible-hidden"),o.find("input.r-visible-input").removeAttr("checked")),i&&d(".customify--repeater-item-settings, .customify--repeater-item-toggle",o).hide(),u.trigger("customify/customizer/repeater/add",[o,n]),o},limitRepeaterItems:function(){var e=this,t=d(".customify--repeater-add-new",e.container),i=d(".customify--settings-fields .customify--repeater-item",e.container).length;0<e.params.limit&&(i>=e.params.limit?(t.addClass("customify--hide"),e.params.limit_msg&&(0===d(".customify--limit-item-msg",e.container).length?d('<p class="customify--limit-item-msg">'+e.params.limit_msg+"</p>").insertBefore(t):d(".customify--limit-item-msg",e.container).removeClass("customify--hide"))):(d(".customify--limit-item-msg",e.container).addClass("customify--hide"),t.removeClass("customify--hide"))),0<i?d(".customify--repeater-reorder",e.container).removeClass("customify--hide"):d(".customify--repeater-reorder",e.container).addClass("customify--hide")},initRepeater:function(){var i,a=this,n=(a.params.limit=parseInt(a.params.limit),isNaN(a.params.limit)&&(a.params.limit=0),a.container.find(".customify--settings-fields").sortable({handle:".customify--repeater-item-heading",containment:"parent",update:function(e,t){a.getValue()}}),a.container.on("click",".customify--repeater-reorder",function(e){e.preventDefault(),d(".customify--repeater-items",a.container).toggleClass("reorder-active"),d(".customify--repeater-add-new",a.container).toggleClass("disabled"),d(".customify--repeater-items",a.container).hasClass("reorder-active")?d(this).html(d(this).data("done")):d(this).html(d(this).data("text"))}),a.container.on("click",".customify--repeater-item .customify--up",function(e){e.preventDefault();var t,e=d(this).closest(".customify--repeater-item");0<e.index()&&(t=e.prev(),e.insertBefore(t),a.getValue())}),a.container.on("click",".customify--repeater-item .customify--down",function(e){e.preventDefault();var e=d(".customify--repeater-items .customify--repeater-item",a.container).length,t=d(this).closest(".customify--repeater-item");t.index()<e-1&&(e=t.next(),t.insertAfter(e),a.getValue())}),a.params.addable||a.params.live_title_field&&(i={},_.each(a.params.default,function(e){_.isUndefined(e._key)||_.isUndefined(e[a.params.live_title_field])||(i[e._key]=e[a.params.live_title_field])}),_.each(a.params.value,function(e,t){_.isUndefined(i[e._key])||(a.params.value[t][a.params.live_title_field]=i[e._key])})),_.isArray(a.params.value)&&(_.each(a.params.value,function(e){a.addRepeaterItem(e)}),a.getValue(!1)),a.limitRepeaterItems(),a.container.on("change",".customify--repeater-item .r-visible-input",function(e){e.preventDefault();e=d(this).closest(".customify--repeater-item");d(this).is(":checked")?e.removeClass("item---visible-hidden"):e.addClass("item---visible-hidden")}),a.params.title_only||a.container.on("click",".customify--repeater-item-toggle, .customify--repeater-live-title",function(e){e.preventDefault(),d(this).closest(".customify--repeater-item").toggleClass("customify--open")}),a.container.on("click",".customify--remove",function(e){e.preventDefault(),d(this).closest(".customify--repeater-item").remove(),u.trigger("customify/customizer/repeater/remove",[a]),a.getValue(),a.limitRepeaterItems()}),{});_.each(a.params.fields,function(e,t){n[e.name]=null,_.isUndefined(e.default)||(n[e.name]=e.default)}),a.container.on("click",".customify--repeater-add-new",function(e){e.preventDefault(),d(this).hasClass("disabled")||(a.addRepeaterItem(n),a.getValue(),a.limitRepeaterItems())})}},s=(wp.customize.controlConstructor.customify=wp.customize.Control.extend({ready:function(){a[this.id]=this}}),{pickingEl:null,listIcons:null,render:function(e){var i=this;_.isUndefined(e)||_.isEmpty(e)||_.each(e,function(e,t){d("#customify--sidebar-icon-type").append(' <option value="'+t+'">'+e.name+"</option>"),i.addCSS(e,t),i.addIcons(e,t)})},addCSS:function(e,t){"object"==typeof e.url?d.each(e.url,function(e,t){d("#font-icon-"+e).length||d("head").append("<link rel='stylesheet' id='font-icon-"+e+"'  href='"+t+"' type='text/css' media='all' />")}):d("#font-icon-"+t).length||d("head").append("<link rel='stylesheet' id='font-icon-"+t+"'  href='"+e.url+"' type='text/css' media='all' />")},addIcons:function(a,n){var s='<ul class="customify--list-icons icon-'+n+'" data-type="'+n+'">';_.each(a.icons,function(e,t){var i="",i=a.class_config?a.class_config.replace(/__icon_name__/g,e):e;s+='<li title="'+e+'" data-type="'+n+'" data-icon="'+i+'"><span class="icon-wrapper"><i class="'+i+'"></i></span></li>'}),s+="</ul>",d("#customify--icon-browser").append(s)},changeType:function(){u.on("change","#customify--sidebar-icon-type",function(){var e=d(this).val();e&&"all"!=e?(d("#customify--icon-browser .customify--list-icons").hide(),d("#customify--icon-browser .customify--list-icons.icon-"+e).show()):d("#customify--icon-browser .customify--list-icons").show()})},show:function(){var e=d("#customize-controls").width();(t?d("#customify--sidebar-icons").css("right",e):d("#customify--sidebar-icons").css("left",e)).addClass("customify--active")},close:function(){(t?d("#customify--sidebar-icons").css("right",-300):d("#customify--sidebar-icons").css("left",-300)).removeClass("customify--active"),d(".customify--icon-picker").removeClass("customify--icon-picking"),this.pickingEl=null},autoClose:function(){var t=this;u.on("click",function(e){d(e.target).closest(".customify--icon-picker").length||d(e.target).closest("#customify--sidebar-icons").length||t.close()}),d("#customify--sidebar-icons .customize-controls-icon-close").on("click",function(){t.close()}),u.on("keyup",function(e){27===e.keyCode&&t.close()})},picker:function(){function i(e){a.pickingEl&&a.pickingEl.removeClass("customify--icon-picking"),a.pickingEl=e.closest(".customify--icon-picker"),a.pickingEl.addClass("customify--picking-icon"),a.show()}var a=this;u.on("click",".customify--icon-picker .customify--pick-icon",function(e){e.preventDefault();var t=d(this);_.isNull(a.listIcons)?a.ajaxLoad(function(){i(t)}):i(t)}),u.on("click","#customify--icon-browser li",function(e){e.preventDefault();var e=d(this),t=e.find("i").clone(),i=e.attr("data-icon")||"",e=e.attr("data-type")||"";console.log("icon",i),d(".customify--input-icon-type",a.pickingEl).val(e),d(".customify--input-icon-name",a.pickingEl).val(i).trigger("change"),d(".customify--icon-preview-icon",a.pickingEl).html(t),a.close()}),u.on("click",".customify--icon-picker .customify--icon-remove",function(e){e.preventDefault(),a.pickingEl&&a.pickingEl.removeClass("customify--icon-picking"),a.pickingEl=d(this).closest(".customify--icon-picker"),a.pickingEl.addClass("customify--picking-icon"),d(".customify--input-icon-type",a.pickingEl).val(""),d(".customify--input-icon-name",a.pickingEl).val("").trigger("change"),d(".customify--icon-preview-icon",a.pickingEl).html("")})},ajaxLoad:function(t){var i=this;d.get(Customify_Control_Args.ajax,{action:"customify/customizer/ajax/get_icons",wp_customize:"on",_nonce:_wpCustomizeSettings.nonce.preview,customize_theme:_wpCustomizeSettings.theme.stylesheet},function(e){e.success&&(i.listIcons=e.data,i.render(e.data),i.changeType(),i.autoClose(),_.isFunction(t)&&t())})},init:function(){this.ajaxLoad(),this.picker(),u.on("keyup","#customify--icon-search",function(e){var t=d(this).val();(t=t.trim())?(d("#customify--icon-browser li").hide(),d("#customify--icon-browser li[data-icon*='"+t+"']").show()):d("#customify--icon-browser li").show()})}}),l={fonts:null,optionHtml:"",$el:null,values:{},config:{},container:null,fields:{},load:function(){var t=this;d.get(Customify_Control_Args.ajax,{action:"customify/customizer/ajax/fonts",wp_customize:"on",_nonce:_wpCustomizeSettings.nonce.preview,customize_theme:_wpCustomizeSettings.theme.stylesheet},function(e){e.success&&(t.fonts=e.data)})},toSelectOptions:function(e,i,t){var a,n,s,o="";if(_.isUndefined(i)&&(i=""),"google"===t)_.each(e,function(e){o+="<option"+(e===i?' selected="selected" ':"")+' value="'+e+'">'+e+"</option>"});else for(_.each(Customify_Control_Args.list_font_weight,function(e,t){o+="<option"+(e===i?' selected="selected" ':"")+' value="'+t+'">'+e+"</option>"}),s=1;s<=9;s++)n="",o+="<option"+(n=(a=100*s)===i?' selected="selected" ':n)+' value="'+a+'">'+a+"</option>";return o},toCheckboxes:function(e,i){var a='<div class="list-subsets">';return _.isObject(i)||(i={}),_.each(e,function(e){var t="";_.isUndefined(i[e])||(t=' checked="checked" '),a+="<p><label><input "+t+'type="checkbox" class="customify-typo-input change-by-js" data-name="languages" name="_n-'+(new Date).getTime()+'" value="'+e+'"> '+e+"</label></p>"}),a+="</div>"},ready:function(){var a=this;c.devices=_.clone(c.allDevices),_.isObject(a.values)||(a.values={}),a.fields={},_.isEmpty(a.config)?a.fields=Customify_Control_Args.typo_fields:_.each(Customify_Control_Args.typo_fields,function(e,t){var i=!0;_.isUndefined(a.config[e.name])||!1===a.config[e.name]&&(i=!1),i&&(a.fields[e.name]=e)}),d(".customify-modal-settings--fields",a.container).append('<input type="hidden" class="customify--font-type">'),c.addFields(a.fields,a.values,d(".customify-modal-settings--fields",a.container),function(){a.get()}),d("input, select, textarea",d(".customify-modal-settings--fields")).removeClass("customify-input").addClass("customify-typo-input change-by-js"),a.optionHtml+='<option value="">'+Customify_Control_Args.theme_default+"</option>",_.each(a.fonts,function(e,t){a.optionHtml+='<optgroup label="'+e.title+'">',_.each(e.fonts,function(e,t){e=_.isString(e)?e:t;a.optionHtml+='<option value="'+t+'">'+e+"</option>"}),a.optionHtml+="</optgroup>"}),d('.customify-typo-input[data-name="font"]',a.container).html(a.optionHtml),!_.isUndefined(a.values.font)&&_.isString(a.values.font)&&d('.customify-typo-input[data-name="font"] option[value="'+a.values.font+'"]',a.container).attr("selected","selected"),a.container.on("change init-change",'.customify-typo-input[data-name="font"]',function(){var e=d(this).val();a.setUpFont(e)}),d('.customify-typo-input[data-name="font"]',a.container).trigger("init-change"),d('.customify-typo-input[data-name="font"]',a.container).select2(),a.container.on("change data-change","input, select",function(){a.get()}),a.container.on("container-data-change",function(){a.get()})},setUpFont:function(e){var t,i,a,n=this;_.isEmpty(e)&&(a="normal"),_.isObject(n.fonts)&&!_.isEmpty(n.fonts)||(n.fonts={normal:{fonts:{}},google:{fonts:{}}}),e=!_.isNull(e)&&e?_.isString(e)?(a=_.isUndefined(n.fonts.google.fonts[e])?"normal":"google",n.fonts.google.fonts[e]):n.fonts.google.fonts[e.font]:{},_.isUndefined(e)||_.isEmpty(e)||(t=e.variants,i=e.subsets),d('.customify-typo-input[data-name="font_weight"]',n.container).html(n.toSelectOptions(t,_.isObject(n.values)?n.values.font_weight:"",a)),d(".customify--font-type",n.container).val(a),"google"!==a?d('.customify--group-field[data-field-name="languages"]',n.container).addClass("customify--hide").find(".customify-field-settings-inner").html(""):(d('.customify--group-field[data-field-name="languages"]',n.container).removeClass("customify--hide"),d('.customify--group-field[data-field-name="languages"]',n.container).removeClass("customify--hide").find(".customify-field-settings-inner").html(n.toCheckboxes(i,_.isObject(n.values)?n.values.languages:"")))},open:function(){var e,t=this,i=t.$el;"opening"!==(i.attr("data-opening")||!1)?(i.attr("data-opening","opening"),t.values=d(".customify-typography-input",t.$el).val(),t.values=JSON.parse(t.values),i.addClass("customify-modal--inside"),d(".customify-modal-settings",i).length?(t.container=d(".customify-modal-settings",i),t.container.hide()):(e=d(d("#tmpl-customify-modal-settings").html()),t.container=e,t.container.hide(),this.$el.append(e),t.ready()),t.container.slideDown(300,function(){t.$el.addClass("modal--opening"),d(".action--reset",t.$el).show()})):d(".customify-modal-settings",i).slideUp(300,function(){i.attr("data-opening",""),i.removeClass("modal--opening"),d(".action--reset",i).hide()})},reset:function(){var e=this,t=e.$el;d(".customify-modal-settings",t).remove(),e.values=d(".customify-typography-input",e.$el).attr("data-default")||"{}";try{e.values=JSON.parse(e.values)}catch(e){}t.addClass("customify-modal--inside"),d(".customify-modal-settings",t).length?e.container=d(".customify-modal-settings",t):(t=d(d("#tmpl-customify-modal-settings").html()),e.container=t,this.$el.append(t),e.ready()),e.get()},get:function(){var t={},i=this;return _.each(this.fields,function(e){"languages"===e.name&&(e.type="checkboxes"),t[e.name]=c.getValue(e,d('.customify--group-field[data-field-name="'+e.name+'"]',i.container))}),t.variant={},t.font&&!_.isUndefined(i.fonts.google.fonts[t.font])&&(t.variant=i.fonts.google.fonts[t.font].variants),t.font_type=d(".customify--font-type",i.container).val(),d(".customify-typography-input",this.$el).val(JSON.stringify(t)).trigger("change"),t},init:function(){this.load()}},r={},m={tabs:{normal:"Normal",hover:"Hover"},config:{},$el:null,container:null,controlID:"",addFields:function(e){var n=this,s=(_.isObject(n.values)||(n.values={}),n.values=_.defaults(n.values,{}),d(".customify-modal-settings--fields",n.container)),i=(s.html(""),n.config=_.defaults(n.config,{tabs:{}}),d('<div class="modal--tabs"></div>')),a=0;_.each(n.config.tabs,function(e,t){e&&_.isObject(n.config[t+"_fields"])&&(a++,i.append('<div><span data-tab="'+t+'" class="modal--tab modal-tab--'+t+'">'+e+"</span></div>"))}),s.append(i),a<=1&&i.addClass("customify--hide"),c.devices=Customify_Control_Args.devices,_.each(n.config.tabs,function(e,t){var i,a;_.isObject(n.config[t+"_fields"])&&!_.isEmpty(t+"_fields")&&(i=d('<div class="modal-tab-content modal-tab--'+t+'"></div>'),s.append(i),c.addFields(n.config[t+"_fields"],n.values[t],i,function(){n.get(_.clone(n.config))}),_.isUndefined(n.values[t])||_.isEmpty(n.values[t])?(a={},_.each(n.config[t+"_fields"],function(e){a[e.name]=_.isUndefined(e.default)?null:e.default})):a=n.values[t],c.initConditional(i,a))}),d("input, select, textarea",n.container).removeClass("customify-input").addClass("customify-modal-input change-by-js"),s.on("change data-change","input, select, textarea",function(){n.get(_.clone(n.config))}),n.container.on("click",".modal--tab",function(){var e=d(this).attr("data-tab")||"";d(".modal--tabs .modal--tab",n.container).removeClass("tab--active"),d(this).addClass("tab--active"),d(".modal-tab-content",n.container).removeClass("tab--active"),d(".modal-tab-content.modal-tab--"+e,n.container).addClass("tab--active")}),d(".modal--tabs .modal--tab",n.container).eq(0).trigger("click"),this.container.slideUp(0)},close:function(){var e=this;e.container.slideUp(300,function(){e.$el.removeClass("modal--opening"),e.$el.attr("data-opening",""),d(".action--reset",e.$el).hide()})},reset:function(){var t=this;d(".customify-modal-settings",t.$el).remove();try{var e=o.control(t.controlID).params.default;t.values=e}catch(e){t.values={}}d(".customify-modal-settings",t.$el).length?t.container=d(".customify-modal-settings",t.$el):(e=d(d("#tmpl-customify-modal-settings").html()),t.container=e,this.$el.append(e),t.addFields()),t.$el.addClass("customify-modal--inside"),t.$el.addClass("modal--opening"),t.container.show(0),d(".customify-hidden-modal-input",t.$el).val(JSON.stringify(t.values)).trigger("change")},get:function(e){var n={},s=this;return s.config=e,_.each(s.config.tabs,function(e,t){var i={},a=d(".modal-tab-content.modal-tab--"+t,s.container);_.isObject(s.config[t+"_fields"])&&_.each(s.config[t+"_fields"],function(e){i[e.name]=c.getValue(e,d('.customify--group-field[data-field-name="'+e.name+'"]',a))}),n[t]=i,c.initConditional(a,i)}),d(".customify-hidden-modal-input",this.$el).val(JSON.stringify(n)).trigger("change"),n},open:function(){var e,t=this;if("opening"!==(t.$el.attr("data-opening")||!1)){t.$el.attr("data-opening","opening"),t.values=d(".customify-hidden-modal-input",t.$el).val();try{t.values=JSON.parse(t.values)}catch(e){}t.$el.addClass("customify-modal--inside"),d(".customify-modal-settings",t.$el).length?t.container=d(".customify-modal-settings",t.$el):((e=d(d("#tmpl-customify-modal-settings").html())).hide(),t.container=e,t.$el.append(e),t.addFields()),this.container.slideDown(300),this.$el.addClass("modal--opening"),d(".action--reset",this.$el).show()}else this.container.slideUp(300,function(){t.$el.attr("data-opening",""),d(".customify-modal-settings",t.$el).hide(),t.$el.removeClass("modal--opening"),d(".action--reset",t.$el).hide()})}},f={},p={tabs:{normal:"Normal",hover:"Hover"},fields:{},normal_fields:{},hover_fields:{},controlID:"",$el:"",contailner:"",setupFields:function(t,e){var i,a,n=[];return-1===t?n=e:!1===t?n=null:_.isObject(t)&&(i={},a=0,_.each(e,function(e){(_.isUndefined(t[e.name])||t[e.name])&&(i[a]=e,a++)}),n=i),n},setupConfig:function(e,t,i){var a=this;a.tabs={},a.normal_fields={},a.hover_fields={},a.tabs=_.clone(Customify_Control_Args.styling_config.tabs),!1===e?a.tabs.hover=!1:_.isObject(e)&&(a.tabs=e),a.normal_fields=a.setupFields(t,Customify_Control_Args.styling_config.normal_fields),a.hover_fields=a.setupFields(i,Customify_Control_Args.styling_config.hover_fields)},addFields:function(e){var a=this,n=(_.isObject(a.values)||(a.values={}),a.values=_.defaults(a.values,{hover:{},normal:{}}),d(".customify-modal-settings--fields",a.container)),i=(n.html(""),d('<div class="modal--tabs"></div>')),s=0;_.each(a.tabs,function(e,t){e&&!_.isEmpty(a[t+"_fields"])&&(s++,i.append('<div><span data-tab="'+t+'" class="modal--tab modal-tab--'+t+'">'+e+"</span></div>"))}),n.append(i),s<=1&&i.addClass("customify--hide"),c.devices=Customify_Control_Args.devices,_.each(a.tabs,function(e,t){var i;_.isObject(a[t+"_fields"])&&!_.isEmpty(t+"_fields")&&(i=d('<div class="modal-tab-content modal-tab--'+t+'"></div>'),n.append(i),c.addFields(a[t+"_fields"],a.values[t],i,function(){a.get()}),c.initConditional(i,a.values[t]))}),d("input, select, textarea",a.container).removeClass("customify-input").addClass("customify-modal-input change-by-js"),n.on("change data-change","input, select, textarea",function(){a.get()}),a.container.on("click",".modal--tab",function(){var e=d(this).attr("data-tab")||"";d(".modal--tabs .modal--tab",a.container).removeClass("tab--active"),d(this).addClass("tab--active"),d(".modal-tab-content",a.container).removeClass("tab--active"),d(".modal-tab-content.modal-tab--"+e,a.container).addClass("tab--active")}),d(".modal--tabs .modal--tab",a.container).eq(0).trigger("click"),this.container.slideUp(0)},close:function(){var e=this;e.container.slideUp(300,function(){e.$el.removeClass("modal--opening"),e.$el.attr("data-opening",""),d(".action--reset",e.$el).hide()})},reset:function(){var t=this;d(".customify-modal-settings",t.$el).remove();try{var e=o.control(t.controlID).params.default;t.values=e}catch(e){t.values={}}d(".customify-modal-settings",t.$el).length?t.container=d(".customify-modal-settings",t.$el):(e=d(d("#tmpl-customify-modal-settings").html()),t.container=e,t.$el.append(e),t.addFields()),t.$el.addClass("customify-modal--inside"),t.$el.addClass("modal--opening"),t.container.show(0),d(".customify-hidden-modal-input",t.$el).val(JSON.stringify(t.values)).trigger("change")},get:function(){var n={},s=this;return _.each(s.tabs,function(e,t){var i={},a=d(".modal-tab-content.modal-tab--"+t,s.container);_.isObject(s[t+"_fields"])&&_.each(s[t+"_fields"],function(e){i[e.name]=c.getValue(e,d('.customify--group-field[data-field-name="'+e.name+'"]',a))}),n[t]=i,c.initConditional(a,i)}),d(".customify-hidden-modal-input",this.$el).val(JSON.stringify(n)).trigger("change"),n},open:function(){var e,t=this;if("opening"!==(t.$el.attr("data-opening")||!1)){t.$el.attr("data-opening","opening"),t.values=d(".customify-hidden-modal-input",t.$el).val();try{t.values=JSON.parse(t.values)}catch(e){}t.$el.addClass("customify-modal--inside"),d(".customify-modal-settings",t.$el).length?t.container=d(".customify-modal-settings",t.$el):((e=d(d("#tmpl-customify-modal-settings").html())).hide(),t.container=e,t.$el.append(e),t.addFields()),this.container.slideDown(300),t.$el.addClass("modal--opening"),d(".action--reset",t.$el).show()}else t.container.slideUp(300,function(){t.$el.attr("data-opening",""),d(".customify-modal-settings",t.$el).hide(),t.$el.removeClass("modal--opening"),d(".action--reset",t.$el).hide()})}},h={};o.bind("ready",function(e,t){u.on("customify/customizer/device/change",function(e,t){d(".customify--device-select a").removeClass("customify--active"),"mobile"!=t?(d(".customify--device-mobile").addClass("customify--hide"),d(".customify--device-general").removeClass("customify--hide"),d(".customify--tab-device-general").addClass("customify--active")):(d(".customify--device-general").addClass("customify--hide"),d(".customify--device-mobile").removeClass("customify--hide"),d(".customify--tab-device-mobile").addClass("customify--active"))}),u.on("click",".customify--tab-device-mobile",function(e){e.preventDefault(),u.trigger("customify/customizer/device/change",["mobile"])}),u.on("click",".customify--tab-device-general",function(e){e.preventDefault(),u.trigger("customify/customizer/device/change",["general"])}),d(".accordion-section").each(function(){var e=d(this),t=d(".customify--device-select",e).first();d(".customize-section-title",e).append(t)}),u.on("click",".customify-devices button",function(e){e.preventDefault();e=d(this).attr("data-device")||"";d('#customize-footer-actions .devices button[data-device="'+e+'"]').trigger("click")}),u.on("change",".customify--field input:checkbox",function(e){d(this).is(":checked")?d(this).parent().addClass("customify--checked"):d(this).parent().removeClass("customify--checked")});function i(i){_.isUndefined(i)&&(i=!1);var a=o.get();_.each(a,function(e,t){t=o.control(t);_.isUndefined(t)||"customify"!=t.params.type||_.isEmpty(t.params.required)||(t.multiple_compare(t.params.required,a,i)?t.container.removeClass("customify--hide"):t.container.addClass("customify--hide"))})}u.ready(function(){_.each(a,function(e,t){_.extend(e,n).init()}),i(!1),u.on("customify/customizer/value_changed",function(){i(!0)}),s.init(),l.init(),u.on("click",".customize-control-customify-styling .action--edit, .customize-control-customify-styling .action--reset",function(e){e.preventDefault();var t,i,a,n,s,e=d(this).attr("data-control")||"";_.isUndefined(h[e])&&(t=o.control(e),i=_.clone(p),a=null,s=n=-1,e&&!_.isUndefined(t)&&!_.isUndefined(t.params.fields)&&_.isObject(t.params.fields)&&(_.isUndefined(t.params.fields.tabs)||(a=t.params.fields.tabs),_.isUndefined(t.params.fields.normal_fields)||(n=t.params.fields.normal_fields),_.isUndefined(t.params.fields.hover_fields)||(s=t.params.fields.hover_fields)),i.$el=d(this).closest(".customize-control-customify-styling").eq(0),i.setupConfig(a,n,s),i.controlID=e,h[e]=i),_.isUndefined(h[e])||(d(this).hasClass("action--reset")?h[e].reset():h[e].open())}),u.on("click",".customize-control-customify-modal .action--edit, .customize-control-customify-modal .action--reset, .customize-control-customify-modal .customify-control-field-header",function(e){e.preventDefault();var t,i,e=d(this).attr("data-control")||"";_.isUndefined(f[e])&&(t=o.control(e),e&&!_.isUndefined(t)&&((i=_.clone(m)).config=t.params.fields,i.$el=d(this).closest(".customize-control-customify-modal").eq(0),i.controlID=e,f[e]=i)),_.isUndefined(f[e])||(d(this).hasClass("action--reset")?f[e].reset():f[e].open())}),u.on("click",".customize-control-customify-typography .action--edit, .customize-control-customify-typography .action--reset",function(){var e,t,i=d(this).attr("data-control")||"";_.isUndefined(r[i])&&(e=o.control(i),i&&!_.isUndefined(e)&&((t=_.clone(l)).config=e.params.fields,t.$el=d(this).closest(".customize-control-customify-typography").eq(0),r[i]=t)),_.isUndefined(r[i])||(d(this).hasClass("action--reset")?r[i].reset():r[i].open())})}),o.section.each(function(e){"section"!=e.params.type&&"customify_section"!=e.params.type||e.container.find(".customize-section-description-container .customize-section-title").append('<button data-section="'+e.id+'" type="button" title="'+Customify_Control_Args.reset+'" class="customize--reset-section" aria-expanded="false"><span class="screen-reader-text">'+Customify_Control_Args.reset+"</span></button>")}),u.on("dblclick",".customify-text-align label",function(e){var t=d(this).find('input[type="radio"]');t.length&&t.is(":checked")&&(t.removeAttr("checked"),t.trigger("data-change"))}),u.on("click",".customize--reset-section",function(e){var t,i,a;e.preventDefault(),d(this).hasClass("loading")||confirm(Customify_Control_Args.confirm_reset)&&(d(this).addClass("loading"),t=d(this).attr("data-section")||"",i=_.clone(window.location),t&&(a=[],e=wp.customize.section(t).controls(),_.each(e,function(e,t){o(e.id).set(""),a[t]=e.id}),d.post(ajaxurl,{action:"customify__reset_section",section:t,settings:a},function(){d(window).off("beforeunload.customize-confirm"),top.location.href=i.origin+i.pathname+"?autofocus[section]="+t+"&url="+encodeURIComponent(o.previewer.previewUrl.get())})))}),u.on("click",".customify-radio-list p",function(e){var t,i,a,n=d(this).find("input").attr("data-name")||!1,s=d(this).hasClass("input-disabled");n&&(t=wp.customize(n),i="noti_"+n,a="",(n=wp.customize.control(n)).params._pro&&n.params.disabled_pro_msg?a=n.params.disabled_pro_msg:n.params.disabled_msg&&(a=n.params.disabled_msg),a&&(s?t.notifications.add(i,new wp.customize.Notification(i,{type:"warning",message:a})):t.notifications.remove(i)))}),_.each(Customify_Control_Args.panel_urls,function(t,e){t&&wp.customize.panel(e,function(e){e.expanded.bind(function(e){e&&wp.customize.previewer.previewUrl.set(t)})})}),_.each(Customify_Control_Args.section_urls,function(t,e){t&&wp.customize.section(e,function(e){e.expanded.bind(function(e){e&&wp.customize.previewer.previewUrl.set(t)})})})})}(jQuery,wp.customize||null);